"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[323],{9704:(a,n,e)=>{e.r(n),e.d(n,{default:()=>u});var s=e(7929),c=e(3910),t=e(5043),o=e(3051),r=e(4022),i=e(5668),l=e(6549),d=e(579);const u=()=>{const[a,n]=(0,t.useState)([]),[e,u]=(0,t.useState)([]),[m,h]=(0,t.useState)(!0),[p,x]=(0,t.useState)(!1),[j,b]=(0,t.useState)([]),w=localStorage.getItem("user");(0,t.useEffect)((()=>{y()}),[]);const y=async()=>{const a=await(0,i.xy)(`balance_${w}`);a&&!f(a.timestamp)?(n(a.data),u(!0),h(!1),console.log("Loaded from IndexedDB")):N()},f=a=>Date.now()-a>3e5,N=async()=>{try{setTimeout((async()=>{const a=await o.A.get("http://localhost/get/acount/balence");a.data.data?(u(!0),n(a.data.data),h(!1),(0,i.dR)(`balance_${w}`,{data:a.data.data,timestamp:Date.now()})):"NO"===a.data.Status?(u(!1),h(!1)):"OUT"===a.data.Logout?(localStorage.removeItem("ssid"),window.location.reload()):(h(!1),console.warn("Unexpected response structure:",a.data))}),1e3)}catch(a){h(!1),console.error(a)}};return(0,d.jsxs)("div",{children:[m?(0,d.jsx)(r.A,{}):(0,d.jsxs)("center",{children:[(0,d.jsxs)("div",{className:"Home-cnt-01-sub-01",children:[(0,d.jsxs)("strong",{children:["sta",(0,d.jsx)("span",{children:"W"}),"ro"]}),(0,d.jsx)("hr",{})]}),(0,d.jsxs)("div",{className:"account-main-cnt-01",children:[(0,d.jsx)("span",{className:"account-main-cnt-01-span-01",onClick:async()=>{try{x(!1);const a=await(0,i.xy)("new")||"",n=await(0,i.xy)("refer_ui")||"",e=await o.A.post("http://localhost/get/balance/new/data",{val_cm:a,refer_ui:n});"OK"===e.data.Status?(await(0,i.dR)("new","no"),N()):"BAD_REF"===e.data.Status?(b("Invalid referral"),x(!0)):(b("Amount not Credited"),x(!0))}catch(a){a.response?console.error("API Error:",a.response.status,a.response.data):a.request?console.error("No response from server. Please check your connection."):console.error("Error occurred:",a.message)}},children:"Wallet"}),(0,d.jsxs)("div",{className:"account-main-cnt-01-sub-01",children:[!e&&(0,d.jsx)("button",{className:"get_bln",onClick:()=>{window.location.href="/play"},children:"Get Free \u20b905.00"}),e&&a.balance&&(0,d.jsxs)("span",{className:"account-main-cnt-01-sub-01-sub-span-01",children:["Account Balance \u20b9",(0,d.jsxs)("span",{children:[a.balance,".00"]})]}),(0,d.jsx)("h2",{children:(0,d.jsx)("button",{className:"wal_add_more",onClick:async()=>{x(!1);if(!await new Promise((a=>{const n=document.createElement("script");n.src="https://checkout.razorpay.com/v1/checkout.js",n.onload=()=>a(!0),n.onerror=()=>a(!1),document.body.appendChild(n)})))return b("Failed to load Payment Page Try"),void x(!0);const a=await fetch("http://localhost/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:100,user:w})}).then((a=>a.json())),n={key:"rzp_live_V4tRMNPowzPDU5",amount:a.amount,currency:"INR",name:"staWro",description:"staWro",order_id:a.id,handler:function(a){N(),b("Payment successful!"),x(!0),console.log("Razorpay Response:",a)},prefill:{name:w},notes:{user:w},theme:{color:"#3399cc"}};new window.Razorpay(n).open()},children:"Add More"})})]})]}),(0,d.jsx)("br",{}),(0,d.jsxs)("div",{className:"account-main-cnt-02",children:[(0,d.jsxs)("div",{className:"account-main-cnt-02-sub-cnt-01",onClick:()=>window.location.href="/account/upi",children:[(0,d.jsx)("span",{children:(0,d.jsx)(c.g,{icon:s.gs2,className:"account-main-cnt-02-sub-cnt-01-sub-icon-01"})}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("span",{className:"account-main-cnt-02-sub-cnt-01-span-01",children:"AC/UPI"})]}),(0,d.jsxs)("div",{className:"account-main-cnt-02-sub-cnt-01",onClick:()=>window.location.href="/account/history",children:[(0,d.jsx)("span",{children:(0,d.jsx)(c.g,{icon:s.PE8,className:"account-main-cnt-02-sub-cnt-01-sub-icon-01"})}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("span",{className:"account-main-cnt-02-sub-cnt-01-span-01",children:"History"})]}),(0,d.jsxs)("div",{className:"account-main-cnt-02-sub-cnt-01",onClick:()=>window.location.href="/account/pending",children:[(0,d.jsx)("span",{children:(0,d.jsx)(c.g,{icon:s.l7F,className:"account-main-cnt-02-sub-cnt-01-sub-icon-01"})}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("span",{className:"account-main-cnt-02-sub-cnt-01-span-01",children:"Pending"})]})]})]}),p&&(0,d.jsx)(l.default,{data:j,val:p})]})}}}]);
//# sourceMappingURL=323.c8ec9c00.chunk.js.map