{"version":3,"file":"static/js/851.6610a99b.chunk.js","mappings":"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","sources":["pages/data.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport api from './api'\r\nimport Loading from '../loading'\r\nimport { getFromDB, saveToDB } from '../db'\r\n\r\nconst Data = () => {\r\n  const CACHE_TIME = 2 * 60 * 1000 // 2 minutes\r\n  const CACHE_KEY_USER = 'userData'\r\n  const CACHE_KEY_BANK = 'bankData'\r\n\r\n  const user = localStorage.getItem('user')\r\n  const [info, setInfo] = useState(null)\r\n  const [hasData, setHasData] = useState(false)\r\n  const [data, setData] = useState({})\r\n  const [isBank, setIsBank] = useState(false)\r\n  const [load, setLoad] = useState(true)\r\n\r\n  useEffect(() => {\r\n    loadUserData()\r\n    loadBankData()\r\n  }, [])\r\n\r\n  const loadUserData = async () => {\r\n    const cached = await getFromDB(CACHE_KEY_USER)\r\n    const now = Date.now()\r\n\r\n    if (cached && now - cached.timestamp < CACHE_TIME) {\r\n      setData(cached.data)\r\n      console.log('✅ Loaded user data from cache')\r\n    } else {\r\n      try {\r\n        const res = await api.get(\r\n          `http://localhost/users/name/and/more/get/${user}`\r\n        )\r\n        if (res.data?.data) {\r\n          setData(res.data.data)\r\n          await saveToDB(CACHE_KEY_USER, {\r\n            data: res.data.data,\r\n            timestamp: now,\r\n          })\r\n        }\r\n      } catch (err) {\r\n        console.error('User data fetch failed', err)\r\n      }\r\n    }\r\n  }\r\n\r\n  const loadBankData = async () => {\r\n    const cached = await getFromDB(CACHE_KEY_BANK)\r\n    const now = Date.now()\r\n\r\n    if (cached && now - cached.timestamp < CACHE_TIME) {\r\n      setHasData(true)\r\n      setInfo(cached.data)\r\n      setIsBank(cached.data.type === 'BANK')\r\n      setLoad(false)\r\n      console.log('✅ Loaded bank data from cache')\r\n    } else {\r\n      try {\r\n        const res = await api.get(\r\n          `http://localhost/get/bank/account/data`\r\n        )\r\n        const result = res.data\r\n\r\n        if (result.data) {\r\n          setHasData(true)\r\n          setInfo(result.data)\r\n          setIsBank(result.data.type === 'BANK')\r\n          await saveToDB(CACHE_KEY_BANK, {\r\n            data: result.data,\r\n            timestamp: now,\r\n          })\r\n        } else if (result.Status === 'No') {\r\n          setHasData(false)\r\n        } else if (result.Logout === 'OUT') {\r\n          localStorage.removeItem('ssid')\r\n          window.location.reload()\r\n        }\r\n      } catch (error) {\r\n        console.error('Bank data fetch failed', error)\r\n      } finally {\r\n        setLoad(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {load ? (\r\n        <Loading />\r\n      ) : (\r\n        <center>\r\n          <div className='Home-cnt-01-sub-01'>\r\n            <strong>\r\n              sta<span>W</span>ro\r\n            </strong>\r\n            <hr />\r\n          </div>\r\n\r\n          <h2 className='data_page-h2-01'>\r\n            <span>User</span> Data\r\n          </h2>\r\n          <br />\r\n\r\n          <div className='data_page-profile-cnt-01'>\r\n            <img\r\n              src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTJa_CcFSwA2X0Y-kYFsSxHaiPE5Z2EOd50FA&s'\r\n              alt='profile'\r\n            />\r\n          </div>\r\n\r\n          <h2 className='data_page-h2-02'>\r\n            Hello <span>{data?.name}</span>.\r\n          </h2>\r\n\r\n          <div style={{ height: '20px' }}></div>\r\n\r\n          <div className='data-page-main-cnt-01'>\r\n            <span>\r\n              Username : <strong>{data?.username}</strong>\r\n            </span>\r\n            <br />\r\n            <br />\r\n            <span>\r\n              Name : <strong>{data?.name}</strong>\r\n            </span>\r\n            <br />\r\n            <br />\r\n            <span>\r\n              Email : <strong>{data?.email}</strong>\r\n            </span>\r\n            <br />\r\n          </div>\r\n\r\n          <br />\r\n\r\n          <div className='data-page-main-cnt-02'>\r\n            {hasData ? (\r\n              <div>\r\n                {isBank ? (\r\n                  <div className='data-page-main-cnt-02-sub-01'>\r\n                    <h3>Bank</h3>\r\n                    {info?.type === 'BANK' && (\r\n                      <div>\r\n                        <span>\r\n                          Account Holder Name : <strong>{info.ac_h_name}</strong>\r\n                        </span>\r\n                        <br />\r\n                        <span>\r\n                          Account Number : <strong>{info.Acc_no}</strong>\r\n                        </span>\r\n                        <br />\r\n                        <span>\r\n                          Bank Name : <strong>{info.bank_name}</strong>\r\n                        </span>\r\n                        <br />\r\n                        <span>\r\n                          IFSC : <strong>{info.ifsc}</strong>\r\n                        </span>\r\n                        <br />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <div className='data-page-main-cnt-02-sub-01'>\r\n                    <h3>UPI</h3>\r\n                    {info?.type === 'UPI' && (\r\n                      <div>\r\n                        <span>\r\n                          Account Holder Name :{' '}\r\n                          <strong>{info.ac_h_name}</strong>\r\n                        </span>\r\n                        <br />\r\n                        <span>\r\n                          UPI ID : <strong>{info.Acc_no}</strong>\r\n                        </span>\r\n                        <br />\r\n                        <span>\r\n                          App : <strong>{info.app}</strong>\r\n                        </span>\r\n                        <br />\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div>\r\n                <h2>No Bank / UPI Account Linked</h2>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ height: '50px' }}></div>\r\n        </center>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Data\r\n"],"names":["Data","CACHE_TIME","CACHE_KEY_USER","CACHE_KEY_BANK","user","localStorage","getItem","info","setInfo","useState","hasData","setHasData","data","setData","isBank","setIsBank","load","setLoad","useEffect","loadUserData","loadBankData","async","cached","getFromDB","now","Date","timestamp","console","log","_res$data","res","api","get","saveToDB","err","error","type","result","Status","Logout","removeItem","window","location","reload","_jsx","children","Loading","_jsxs","className","src","alt","name","style","height","username","email","ac_h_name","Acc_no","bank_name","ifsc","app"],"sourceRoot":""}